<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Groff Blog - README</title>
    <style>
        body {
            font-family: monospace;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        h1, h2, h3 {
            color: #333;
        }
        h1 {
            border-bottom: 2px solid #333;
        }
        h2 {
            margin-top: 2em;
        }
        pre, code {
            background: #f4f4f4;
            padding: 2px 5px;
            border-radius: 3px;
        }
        pre {
            padding: 10px;
            overflow-x: auto;
        }
        ul, ol {
            margin-left: 20px;
        }
        a {
            color: #1a73e8;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>My Groff Blog</h1>
    <p>A minimalist blog built with groff on OpenBSD, designed for simplicity and lightweight performance. This blog uses groff to generate HTML content from <code>.ms</code> files, styled with a clean, retro-inspired CSS theme. It features a fixed sidebar with links, a responsive layout.</p>

    <h2>Features</h2>
    <ul>
        <li><strong>Lightweight:</strong> Built with groff and minimal CSS/JS, ensuring fast load times.</li>
        <li><strong>Static Site:</strong> No server-side processing; all pages are pre-generated HTML.</li>
        <li><strong>Responsive Design:</strong> Adapts to mobile and desktop screens.</li>
        <li><strong>Customizable:</strong> Easily configure the blog name, subtitle, colors, and sidebar links.</li>
        <li><strong>SEO-Friendly:</strong> Includes meta tags for better search engine visibility.</li>
        <li><strong>Source Code View:</strong> Each post and static page includes a "View Source" link to view the formatted <code>.ms</code> source as HTML.</li>
    </ul>

    <h2>Prerequisites</h2>
    <p>To set up and run this blog, you'll need:</p>
    <ul>
        <li>OpenBSD (or another UNIX-like system with groff installed).</li>
        <li><strong>groff:</strong> For processing <code>.ms</code> files into HTML. Install with <code>pkg_add groff</code> on OpenBSD.</li>
        <li><strong>ksh:</strong> The Korn shell, used for the build script. Typically pre-installed on OpenBSD.</li>
        <li>A web server (e.g., <code>httpd</code> on OpenBSD) to serve the generated HTML files.</li>
        <li>A text editor to write <code>.ms</code> files (e.g., <code>vi</code>, <code>nano</code>).</li>
    </ul>

    <h2>Setup Instructions</h2>
    <ol>
        <li><strong>Clone the Repository (if applicable):</strong>
            <pre>git clone &lt;repository-url&gt;<br>cd my-groff-blog</pre>
        </li>
        <li><strong>Directory Structure:</strong>
            <p>Ensure your directory looks like this:</p>
            <pre>.
├── blog.conf           # Configuration file (optional)
├── newpost.ksh         # Script to create new posts
├── publish.ksh         # Build script to generate the site
├── index.ms            # Index page description (groff .ms file)
├── pages/              # Static pages (e.g., bio.ms, contact.ms)
│   ├── bio.ms
│   └── contact.ms
├── posts/              # Blog posts (groff .ms files)
│   ├── post1.ms
│   └── post2.ms
├── sidebar.links       # Sidebar links configuration (optional)
├── static/             # Static assets (CSS, fonts, images)
│   ├── css/
│   │   └── base.css
│   ├── fonts/
│   │   ├── JetBrainsMono-Regular.woff2
│   │   └── fontawesome-webfont.woff2
│   └── images/
│       └── profile.jpg
├── templates/          # HTML templates
│   ├── index.html.tmpl
│   ├── post.html.tmpl
│   └── static.html.tmpl
└── public/             # Generated output directory (created by build script)
    ├── YYYY/MM/DD/     # Blog posts (e.g., 2025/03/28/post1.html)
    ├── css/            # CSS files
    ├── fonts/          # Font files
    ├── images/         # Image files
    └── bio.html        # Static pages</pre>
        </li>
        <li><strong>Install Dependencies:</strong>
            <p>On OpenBSD, ensure groff is installed:</p>
            <pre>doas pkg_add groff</pre>
        </li>
        <li><strong>Configure the Blog (Optional):</strong>
            <ul>
                <li>Edit <code>blog.conf</code> to customize the blog name, colors, and subtitle:
                    <pre>BLOG_NAME="My Groff Blog"
THEME_FONT="JetBrains Mono"
LIGHT_BG="#ffffff"
LIGHT_FG="#000000"
LIGHT_LINK="#1a73e8"
DARK_BG="#1e1e1e"
DARK_FG="#d4d4d4"
DARK_LINK="#8ab4f8"
SITE_SUBTITLE="A minimalist blog built with groff on OpenBSD"</pre>
                </li>
                <li>Edit <code>sidebar.links</code> to customize the sidebar links (format: <code>type|url|label|icon</code>):
                    <pre>link|https://x.com/yourusername|X: @yourusername|fa-twitter
link|https://yourwebsite.com|My Website|fa-globe
link|https://x.com/anotheruser|X: @anotheruser|fa-twitter</pre>
                </li>
            </ul>
        </li>
        <li><strong>Add a Profile Picture:</strong>
            <p>Place a <code>profile.jpg</code> file in <code>static/images/</code>. This will be displayed in the sidebar.</p>
        </li>
        <li><strong>Add a Favicon (Optional):</strong>
            <p>Place a <code>favicon.ico</code> file in <code>static/</code>. This will be used as the browser tab icon.</p>
        </li>
        <li><strong>Write Content:</strong>
            <ul>
                <li>Add blog posts in the <code>posts/</code> directory as <code>.ms</code> files (e.g., <code>posts/post1.ms</code>):
                    <pre>.TL
A Minimalist Blog Post
.AU
Alex Smith
.DA
March 26, 2025
.PP
Welcome to my first post, written in groff on OpenBSD.</pre>
                </li>
                <li>Edit <code>index.ms</code> for the index page description:
                    <pre>.TL
Welcome to My Groff Blog
.PP
This is a minimalist blog built with groff on OpenBSD. I share my thoughts on minimalist coding, UNIX philosophy, and the power of groff. Explore my posts, bio, and contact information below.</pre>
                </li>
                <li>Add static pages (e.g., Bio, Contact) in the <code>pages/</code> directory as <code>.ms</code> files.</li>
            </ul>
        </li>
        <li><strong>Build the Site:</strong>
            <p>Run the build script to generate the HTML files:</p>
            <pre>./publish.ksh</pre>
            <p>This will create the <code>public/</code> directory with all generated HTML, CSS, and assets.</p>
        </li>
        <li><strong>Serve the Site:</strong>
            <ul>
                <li>Use OpenBSD's <code>httpd</code> to serve the <code>public/</code> directory:
                    <pre>doas cp -r public/* /var/www/htdocs/
doas rcctl enable httpd
doas rcctl start httpd</pre>
                </li>
                <li>Alternatively, use any web server (e.g., Nginx, Apache) or a local development server:
                    <pre>cd public
python3 -m http.server 8000</pre>
                </li>
                <li>Open <a href="http://localhost:8000">http://localhost:8000</a> (or your server's URL) in a browser to view the blog.</li>
            </ul>
        </li>
    </ol>

    <h2>Customization</h2>
    <ul>
        <li><strong>Blog Name and Subtitle:</strong> Edit <code>blog.conf</code> to change <code>BLOG_NAME</code> and <code>SITE_SUBTITLE</code>.</li>
        <li><strong>Colors:</strong> Modify <code>blog.conf</code> to adjust <code>LIGHT_BG</code>, <code>LIGHT_FG</code>, <code>LIGHT_LINK</code>, <code>DARK_BG</code>, <code>DARK_FG</code>, and <code>DARK_LINK</code>.</li>
        <li><strong>Sidebar Links:</strong> Edit <code>sidebar.links</code> to add or remove links.</li>
        <li><strong>Profile Picture:</strong> Replace <code>static/images/profile.jpg</code> with your own image.</li>
        <li><strong>Favicon:</strong> Add a <code>favicon.ico</code> to <code>static/</code>.</li>
    </ul>

    <h2>File Structure</h2>
    <ul>
        <li><code>blog.conf</code>: Configuration file for blog settings (optional).</li>
        <li><code>newpost.ksh</code>: Script to create new blog posts interactively.</li>
        <li><code>publish.ksh</code>: Script to generate the static site.</li>
        <li><code>index.ms</code>: Groff file for the index page description.</li>
        <li><code>pages/</code>: Directory for static pages (e.g., <code>bio.ms</code>, <code>contact.ms</code>).</li>
        <li><code>posts/</code>: Directory for blog posts (e.g., <code>post1.ms</code>).</li>
        <li><code>sidebar.links</code>: Configuration file for sidebar links (optional).</li>
        <li><code>static/</code>: Directory for static assets (CSS, fonts, images).</li>
        <li><code>templates/</code>: Directory for HTML templates (<code>index.html.tmpl</code>, <code>post.html.tmpl</code>, <code>static.html.tmpl</code>).</li>
        <li><code>public/</code>: Output directory for the generated site, with posts in <code>YYYY/MM/DD/</code> subdirectories.</li>
    </ul>

    <h2>How It Works</h2>
    <ol>
        <li><strong>Content Creation:</strong>
            <ul>
                <li>Blog posts and static pages are written in groff <code>.ms</code> format (e.g., <code>posts/post1.ms</code>, <code>pages/bio.ms</code>).</li>
                <li>The index page description is written in <code>index.ms</code>.</li>
            </ul>
        </li>
        <li><strong>Build Process:</strong>
            <ul>
                <li>The <code>publish.ksh</code> script:
                    <ul>
                        <li>Processes <code>.ms</code> files with groff to generate HTML.</li>
                        <li>Sorts posts by date (newest first) and places them in <code>public/YYYY/MM/DD/</code>.</li>
                        <li>Generates the sidebar with links from <code>sidebar.links</code> and static pages.</li>
                        <li>Applies HTML templates (<code>index.html.tmpl</code>, <code>post.html.tmpl</code>, <code>static.html.tmpl</code>) to create the final pages.</li>
                        <li>Copies static assets (CSS, fonts, images) to categorized subdirectories in <code>public/</code>.</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><strong>Styling:</strong>
            <ul>
                <li><code>boring-web-snob.css</code>: Main stylesheet for layout and styling.</li>
                <li><code>vars.css</code>: Defines color variables (generated from <code>blog.conf</code>).</li>
            </ul>
        </li>
        <li><strong>Output:</strong>
            <ul>
                <li>The <code>public/</code> directory contains the static site, ready to be served by a web server.</li>
            </ul>
        </li>
    </ol>

    <h2>Adding a New Post</h2>
    <ol>
        <li><strong>Create a New Post:</strong>
            <p>Use the <code>newpost.ksh</code> script to generate a new <code>.ms</code> file in <code>posts/</code>:</p>
            <pre>./newpost.ksh "My New Post"</pre>
            <p>This creates <code>posts/my-new-post.ms</code> with a template (title, author from GECOS, current date). Optionally, it prompts to open it in <code>$EDITOR</code> or <code>vi</code>.</p>
        </li>
        <li><strong>Run the Build Script:</strong>
            <pre>./publish.ksh</pre>
            <p>The new post will appear in <code>public/YYYY/MM/DD/</code> (e.g., <code>public/2025/03/27/my-new-post.html</code>) and on the index page, sorted by date.</p>
        </li>
    </ol>

    <h2>Adding a New Static Page</h2>
    <ol>
        <li><strong>Create a New Static Page:</strong>
            <p>Create a new <code>.ms</code> file in the <code>pages/</code> directory (e.g., <code>pages/about.ms</code>):</p>
            <pre>.TL
About Me
.PP
I'm Alex, a minimalist coder who loves OpenBSD and groff.</pre>
        </li>
        <li><strong>Run the Build Script:</strong>
            <pre>./publish.ksh</pre>
            <p>The new page will be generated (e.g., <code>public/about.html</code>) with a "View Source" link to <code>public/about_source.html</code> and added to the sidebar.</p>
        </li>
    </ol>

    <h2>Troubleshooting</h2>
    <ul>
        <li><strong>Missing Bullets:</strong> The sidebar uses <code>&lt;div&gt;</code> and <code>&lt;span&gt;</code> elements instead of <code>&lt;ul&gt;</code> to avoid bullet rendering issues.</li>
        <li><strong>Build Errors:</strong> Ensure groff is installed and all required files (<code>index.ms</code>, <code>templates/</code>, <code>static/</code>) are present.</li>
        <li><strong>404 Errors:</strong> Verify that all static assets (e.g., <code>profile.jpg</code>, <code>favicon.ico</code>) are in the <code>static/</code> directory.</li>
    </ul>

    <h2>License</h2>
    <p>This project is licensed under the MIT License. Feel free to use, modify, and distribute it as you see fit.</p>

    <h2>Acknowledgments</h2>
    <ul>
        <li>Built with groff and OpenBSD.</li>
        <li>Fonts: JetBrains Mono and FontAwesome.</li>
        <li>Inspired by minimalist, UNIX-friendly design principles.</li>
    </ul>
</body>
</html>
